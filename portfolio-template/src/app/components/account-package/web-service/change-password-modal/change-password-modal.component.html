<div class="password-modal-container">
  <div class="modal-header">
    <h2>Changer le mot de passe</h2>
    <button class="close-button" (click)="dialogRef.close()">
      <svg width="24" height="24" viewBox="0 0 24 24">
        <path fill="currentColor" d="M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z"/>
      </svg>
    </button>
  </div>

  <div class="modal-content">
    <form [formGroup]="passwordForm" (ngSubmit)="onSubmit()">
      <div class="form-group">
        <label for="currentPassword">Mot de passe actuel</label>
        <div class="input-container">
          <input 
            id="currentPassword"
            [type]="hideCurrentPassword ? 'password' : 'text'" 
            formControlName="currentPassword"
            placeholder="Entrez votre mot de passe actuel">
          <button 
            type="button"
            class="toggle-visibility"
            (click)="hideCurrentPassword = !hideCurrentPassword">
            <svg width="24" height="24" viewBox="0 0 24 24">
              <path *ngIf="hideCurrentPassword" fill="currentColor" d="M12,9A3,3 0 0,1 15,12A3,3 0 0,1 12,15A3,3 0 0,1 9,12A3,3 0 0,1 12,9M12,4.5C17,4.5 21.27,7.61 23,12C21.27,16.39 17,19.5 12,19.5C7,19.5 2.73,16.39 1,12C2.73,7.61 7,4.5 12,4.5M3.18,12C4.83,15.36 8.24,17.5 12,17.5C15.76,17.5 19.17,15.36 20.82,12C19.17,8.64 15.76,6.5 12,6.5C8.24,6.5 4.83,8.64 3.18,12Z"/>
              <path *ngIf="!hideCurrentPassword" fill="currentColor" d="M12,17C10.89,17 10,16.1 10,15C10,13.89 10.89,13 12,13A2,2 0 0,1 14,15A2,2 0 0,1 12,17M18,20V10H6V20H18M18,8A2,2 0 0,1 20,10V20A2,2 0 0,1 18,22H6C4.89,22 4,21.1 4,20V10C4,8.89 4.89,8 6,8H7V6A5,5 0 0,1 12,1A5,5 0 0,1 17,6V8H18M12,3A3,3 0 0,0 9,6V8H15V6A3,3 0 0,0 12,3Z"/>
            </svg>
          </button>
        </div>
      </div>

      <div class="form-group">
        <label for="newPassword">Nouveau mot de passe</label>
        <div class="input-container">
          <input 
            id="newPassword"
            [type]="hideNewPassword ? 'password' : 'text'" 
            formControlName="newPassword"
            placeholder="Entrez votre nouveau mot de passe">
          <button 
            type="button"
            class="toggle-visibility"
            (click)="hideNewPassword = !hideNewPassword">
            <svg width="24" height="24" viewBox="0 0 24 24">
              <path *ngIf="hideNewPassword" fill="currentColor" d="M12,9A3,3 0 0,1 15,12A3,3 0 0,1 12,15A3,3 0 0,1 9,12A3,3 0 0,1 12,9M12,4.5C17,4.5 21.27,7.61 23,12C21.27,16.39 17,19.5 12,19.5C7,19.5 2.73,16.39 1,12C2.73,7.61 7,4.5 12,4.5M3.18,12C4.83,15.36 8.24,17.5 12,17.5C15.76,17.5 19.17,15.36 20.82,12C19.17,8.64 15.76,6.5 12,6.5C8.24,6.5 4.83,8.64 3.18,12Z"/>
              <path *ngIf="!hideNewPassword" fill="currentColor" d="M12,17C10.89,17 10,16.1 10,15C10,13.89 10.89,13 12,13A2,2 0 0,1 14,15A2,2 0 0,1 12,17M18,20V10H6V20H18M18,8A2,2 0 0,1 20,10V20A2,2 0 0,1 18,22H6C4.89,22 4,21.1 4,20V10C4,8.89 4.89,8 6,8H7V6A5,5 0 0,1 12,1A5,5 0 0,1 17,6V8H18M12,3A3,3 0 0,0 9,6V8H15V6A3,3 0 0,0 12,3Z"/>
            </svg>
          </button>
        </div>
        <div class="hint">Minimum 8 caract√®res</div>
      </div>

      <div class="form-group">
        <label for="confirmPassword">Confirmer le mot de passe</label>
        <input 
          id="confirmPassword"
          type="password" 
          formControlName="confirmPassword"
          placeholder="Confirmez votre nouveau mot de passe">
        <div *ngIf="passwordForm.hasError('notSame')" class="error-message">
          Les mots de passe ne correspondent pas
        </div>
      </div>

      <div class="modal-actions">
        <button type="button" class="cancel-button" (click)="dialogRef.close()">Annuler</button>
        <button 
          type="submit" 
          class="submit-button"
          [disabled]="passwordForm.invalid || loading">
          <span *ngIf="!loading">Valider</span>
          <span *ngIf="loading" class="spinner"></span>
        </button>
      </div>
    </form>
  </div>
</div>