<div class="dashboard-container">
  <!-- Fond animé identique -->
  <div class="animated-background">
    <div class="gradient-circle circle-1"></div>
    <div class="gradient-circle circle-2"></div>
    <div class="grid-pattern"></div>
  </div>

  <!-- En-tête -->
  <div class="dashboard-header">
    <h1 class="dashboard-title">Liste des <span class="text-gradient">Contacts</span></h1>
    <p class="dashboard-subtitle">Gérez les messages reçus des visiteurs</p>
    <div class="header-divider"></div>
  </div>

  <!-- Contenu -->
  <div *ngIf="isLoading" class="loading-container">
    <mat-spinner diameter="50" color="accent"></mat-spinner>
    <p>Chargement des contacts...</p>
  </div>

  <div class="cards-container" *ngIf="!isLoading">
    <mat-card *ngFor="let contact of contacts; let i = index" 
              class="contact-card"
              [@fadeIn]="i">
      <div class="card-content">
        <div class="card-icon">
          <mat-icon>contact_mail</mat-icon>
        </div>
        <h2 class="card-title">{{ contact.email | truncate:20 }}</h2>
        <p class="card-description">
          <span *ngIf="contact.telephone">
            <mat-icon class="small-icon">phone</mat-icon> 
            {{ contact.telephone | phoneFormat }}
          </span>
          <span *ngIf="!contact.telephone">Aucun téléphone</span>
        </p>
        <div class="message-preview">
          {{ contact.message | truncate:60 }}
        </div>
      </div>
      <div class="card-actions">
        <button mat-icon-button (click)="viewDetails(contact)" class="detail-button" matTooltip="Voir détails">
          <mat-icon>visibility</mat-icon>
        </button>
        <button mat-icon-button (click)="deleteContact(contact.idContact)" class="delete-button" matTooltip="Supprimer">
          <mat-icon>delete</mat-icon>
        </button>
      </div>
    </mat-card>
  </div>

  <!-- Pagination -->
  <mat-paginator [length]="totalElements"
                 [pageSize]="pageSize"
                 [pageIndex]="pageIndex"
                 [pageSizeOptions]="[5, 10, 20]"
                 (page)="onPageChange($event)"
                 aria-label="Select page"
                 class="custom-paginator"
                 *ngIf="!isLoading && contacts.length > 0">
  </mat-paginator>
</div>